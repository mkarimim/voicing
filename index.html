<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fantastic Speech Recognition Demo</title>
  <style>
    /* Basic Reset and Box Model */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    /* Body Styling - Background, Font, Centering */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* A modern sans-serif font */
      background: linear-gradient(to right, #6a11cb 0%, #2575fc 100%); /* Gradient background */
      color: #333; /* Default text color */
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      display: flex; /* Use flexbox to center content */
      justify-content: center; /* Center horizontally */
      align-items: center; /* Center vertically */
      min-height: 100vh; /* Full viewport height */
    }

    /* Container for the main content */
    .container {
      background-color: #fff; /* White background for the content box */
      padding: 40px 30px;
      border-radius: 10px; /* Rounded corners */
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); /* Soft shadow */
      max-width: 500px; /* Limit the width */
      width: 100%; /* Make it responsive */
      text-align: center; /* Center text and inline elements */
      opacity: 0.95; /* Slightly transparent */
    }

    /* Heading Style */
    h2 {
      color: #0056b3; /* A deep blue color */
      margin-top: 0;
      margin-bottom: 30px;
      font-size: 1.8em;
    }

    /* Label Style */
    label {
      display: block; /* Make label take its own line */
      margin-bottom: 8px;
      font-weight: bold;
      color: #555;
      text-align: left; /* Align label text left */
    }

    /* Select (Dropdown) Style */
    select {
      display: block; /* Make select take its own line */
      width: 100%; /* Full width */
      padding: 10px;
      margin-bottom: 25px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1rem;
      background-color: #f9f9f9;
      cursor: pointer;
      transition: border-color 0.3s ease;
      -webkit-appearance: none; /* Remove default arrow in some browsers */
      -moz-appearance: none;
      appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%22292.4%22 height%3D%22292.4%22%3E%3Cpath fill%3D%22%23007bff%22 d%3D%22M287 69.4a17.6 17.6 0 0 0-13-5.4H18.4c-5 0-9.3 1.8-12.9 5.4A17.6 17.6 0 0 0 0 82.2c0 5 1.8 9.3 5.4 12.9l128 127.9c3.6 3.6 7.9 5.4 12.8 5.4s9.2-1.8 12.8-5.4L287 95c3.5-3.5 5.4-7.8 5.4-12.8 0-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); /* Custom arrow */
      background-repeat: no-repeat;
      background-position: right 10px top 50%;
      background-size: 12px auto;
    }

    select:hover, select:focus {
      border-color: #007bff;
      outline: none;
    }

    /* Button Style */
    button {
      background-color: #007bff; /* Primary blue */
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1.1em;
      transition: background-color 0.3s ease, transform 0.1s ease; /* Smooth transitions */
      margin-bottom: 25px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    button:hover {
      background-color: #0056b3; /* Darker blue on hover */
      transform: translateY(-2px); /* Slight lift effect */
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    button:active {
      background-color: #004085; /* Even darker when active */
      transform: translateY(0); /* Reset transform */
      box-shadow: none;
    }

     button:disabled {
      background-color: #cccccc; /* Grey out when disabled */
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
     }


    /* Result Paragraph Style */
    #result {
      margin-top: 20px;
      padding: 15px;
      border: 2px dashed #007bff; /* Dashed blue border */
      border-radius: 5px;
      min-height: 3em; /* Ensure some initial height */
      background-color: #e9f7ff; /* Light blue background */
      color: #004085; /* Dark blue text */
      text-align: left; /* Align result text left */
      word-wrap: break-word; /* Prevent overflow */
      font-style: italic; /* Initial state often feels like a hint */
    }

    /* Style when listening */
    #result.listening {
        border-color: #28a745; /* Green border when listening */
        background-color: #d4edda; /* Light green background */
        color: #155724; /* Dark green text */
        font-style: normal; /* Remove italic */
        animation: pulse 1.5s infinite ease-in-out; /* Subtle pulse animation */
    }

    /* Style for errors */
    #result.error {
        border-color: #dc3545; /* Red border for errors */
        background-color: #f8d7da; /* Light red background */
        color: #721c24; /* Dark red text */
        font-style: normal;
        animation: none; /* Stop animation */
    }


    /* Keyframes for Pulse Animation */
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0.4); }
      70% { box-shadow: 0 0 0 15px rgba(0, 123, 255, 0); }
      100% { box-shadow: 0 0 0 0 rgba(0, 123, 255, 0); }
    }

    /* Add a little spacing below the select */
    label + select {
        margin-top: 5px; /* Space between label and select */
    }

    /* Ensure elements inside container respect text-align left */
    .container > * {
        margin-left: auto;
        margin-right: auto;
    }
     .container label, .container select, .container #result {
        text-align: left;
        margin-left: 0; /* Override auto margins for these specific elements */
        margin-right: 0;
     }


  </style>
</head>
<body>
  <div class="container">
    <h2>Speech Recognition Demo</h2>

    <label for="language-select">Select Language:</label>
    <select id="language-select">
      <option value="fa-IR">Persian (فارسی)</option>
      <option value="en-US" selected>English (US)</option> <!-- Added selected -->
      <option value="ar-SA">Arabic (العربية)</option>
       <option value="es-ES">Spanish (Español)</option> <!-- Added more languages -->
       <option value="fr-FR">French (Français)</option>
    </select>

    <button id="start-btn">Start Listening</button>

    <p id="result">Click "Start Listening" to begin...</p> <!-- Changed initial text -->
  </div>

  <script>
    const startBtn = document.getElementById('start-btn');
    const resultP = document.getElementById('result');
    const languageSelect = document.getElementById('language-select');

    // Check for API support first
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      resultP.textContent = "Speech Recognition API not supported in this browser.";
      resultP.classList.add('error'); // Style as error
      startBtn.disabled = true; // Disable the button
    } else {
      const recognition = new SpeechRecognition();
      recognition.interimResults = false; // We only want the final result
      recognition.continuous = false; // Stop after a single utterance

      // Event when recognition starts
      recognition.onstart = () => {
          resultP.textContent = "Listening in " + languageSelect.options[languageSelect.selectedIndex].text + "...";
          resultP.classList.remove('error'); // Remove error state if any
          resultP.classList.add('listening'); // Add listening class for styling
          startBtn.textContent = "Listening..."; // Change button text
          startBtn.disabled = true; // Disable button while listening
      };

      // Event when a result is received
      recognition.onresult = (event) => {
        const transcript = event.results[0][0].transcript;
        resultP.textContent = "You said: " + transcript;
        resultP.classList.remove('listening'); // Remove listening class
        resultP.classList.remove('error'); // Remove error class
      };

      // Event on error
      recognition.onerror = (event) => {
        resultP.textContent = "Error: " + event.error + ". Please try again.";
        resultP.classList.remove('listening'); // Remove listening class
        resultP.classList.add('error'); // Add error class for styling
      };

       // Event when recognition ends (either successful or due to inactivity/error)
       recognition.onend = () => {
           // Only reset button/state if not already reset by result/error
           if (startBtn.disabled) {
                startBtn.textContent = "Start Listening"; // Reset button text
                startBtn.disabled = false; // Enable button
           }
           // If it ended without a result or explicit error message, show a default
           if (resultP.textContent.startsWith("Listening in") || resultP.textContent === "Click \"Start Listening\" to begin...") {
                resultP.textContent = "Listening ended. No speech detected or activity timeout.";
                 resultP.classList.remove('listening');
           }
       };


      // Button click handler
      startBtn.onclick = () => {
        resultP.textContent = "Starting recognition..."; // Immediate feedback
        resultP.classList.remove('listening', 'error'); // Reset classes
        recognition.lang = languageSelect.value; // Set language
        recognition.start(); // Start listening
        // The onstart event will update the text further
      };

      // Set initial text on load
      resultP.textContent = "Click \"Start Listening\" to begin...";
    }
  </script>
</body>
</html>
